# 軍儀 GUI

## 軍儀について

## 設計
### 要件定義
- 1つのページでの対人戦
  - 駒の操作（配置、移動、取り消し）
  - 盤面表示
    - 駒の動ける範囲の表示（オプショナル）
  - 駒の種類とルールの実装
- ルールベースやAI対戦

### 画面設計（UI/UX設計）
- 1ページで完結するシンプルなUI
- 対戦開始画面
  - 対人戦か、AI戦かの選択
  - ルールの選択
    - 入門編
    - 初級編
    - 中級編
    - 上級編
- 対戦画面
  - 盤面
  - 駒の操作
  - 駒の表示
- メニュー
  - ハンバーガーメニューで駒の移動範囲表示オプションを選択可能

- データ構造・ロジック設計
  - 盤面や駒、ルールをどのようなデータ構造で表現するかを検討します。
    - 盤面は2次元配列で表現します。
    - 各マス（Cell）はCellクラスで表現し、最大3つまでの駒（Piece）を配列で保持します（軍儀の「ツケ」ルール対応）。
    - Piece（駒）は種類・陣営・表裏・状態（isAvailable: 操作可能か否か）などを持つオブジェクトとして表現します。
      - Piece自体には位置情報を持たせず、CellがPieceの配列を管理します。
      - isAvailableは、ツケの最上段の駒のみtrueとなり、他はfalseとします。
    - ルールは関数やクラスで実装し、駒の動きや勝利条件を定義します。
    - 例：
      - type Cell = object
          pieces: seq[Piece]  # 先頭が最下段、末尾が最上段
      - type Piece = object
          kind, side, isFaceUp, isAvailable など
  - ゲーム進行の流れや状態管理の方法も考えます。

- 技術選定
  - Nimを使用し、HTML/JSでの実装を検討します。
  - karaxを使用したSPAで、外部APIの連携はないシンプルな構成を目指します。

- 機能追加・テスト
  - 段階的に機能を追加し、テストしながら進めます。

## ToDo
- [] 置き駒の追加
  - [] 最初にレベルを表示
    - [] 入門編
    - [] 初級編
    - [] 中級編
    - [] 上級編
- [] 順番の追加
  - [] 黒・白
    - [] ランダム
- [] ルールの追加
  - [] 相手の駒を取る・ツケる場合は、自分の駒が相手のツケた段数以上でなければならない
  - [] 相手の駒を取る場合、その駒が自分の駒をツケていたら、そのマスの相手の駒全てを除外し、自分の駒にツケた状態になる（ツケる場合は相手の駒を除外しない）
  - [] 新の位置は自分の駒より下でなければならない
  - [] 新は自身の駒にツケることができる
- [] 特殊な駒の操作
  - [] 謀
    - [] 謀将が相手の駒にツケた場合、自身の持ち駒に同じ種類の駒があれば、それと入れ替えることができる
  - [] 砲・筒・弓
    - [] 飛び越える途中に、自分の付けた段数より大きい駒がいれば、飛び越えられない
- [] 機能の追加
  - [] 全駒の移動可能範囲の表示
  - [] CPU対戦の追加